
@{
    ViewData["Title"] = "Details";
}

@if (ViewBag.Message != null)
{
    @*TERNARY EXPRESSION*@
    <p class="alert-@(ViewBag.Error != null ? "danger" : "success")">@(ViewBag.Message)</p>

    if (ViewBag.Error != null)
    {
        <ul>
            @foreach (Exception e in ViewBag.Exception.ValidationExceptions)
            {
                <li class="alert-danger">@(e.Message)</li>
            }
        </ul>
    }
}

@if (ViewBag.CourseDetails != null)
{
    <h1>Course Details for @(ViewBag.CourseDetails.CourseName)</h1>

    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>Course ID</th>
                <th>Course Name</th>
                <th>Subject</th>
                <th>Course Description</th>
                <th>Grade Level</th>
                <th>Start Date</th>
                <th>End Date</th>
            </tr>
            <tr>
                <td>@(ViewBag.CourseDetails.ID)</td>
                <td>@(ViewBag.CourseDetails.CourseName)</td>
                <td>@(ViewBag.CourseDetails.Subject)</td>
                <td>@(ViewBag.CourseDetails.CourseDescription)</td>
                <td>@(ViewBag.CourseDetails.GradeLevel)</td>
                <td>@((ViewBag.CourseDetails.StartDate == null ? "TBA" : ((DateTime)ViewBag.CourseDetails.StartDate).ToLongDateString()))</td>
                <td>@((ViewBag.CourseDetails.EndDate == null ? "TBA" : ((DateTime)ViewBag.CourseDetails.EndDate).ToLongDateString()))</td>
            </tr>
        </thead>
    </table>

    <a asp-action="CourseList" asp-controller="Course" class="badge-pill badge-warning">Course List</a>
    <a asp-action="Register" asp-controller="Course" asp-route-courseID="@(ViewBag.CourseDetails.ID)" class="badge-pill badge-warning">Enroll</a>

    @*@if (User.Identity.Name == null)
    {
        <a asp-action="Index" asp-controller="SignIn">SignIn to Enroll</a>
    }
    else
    {
        <a asp-action="Register" asp-controller="Course" asp-route-courseID="@(ViewBag.CourseDetails.ID)" class="badge-pill badge-warning">Enroll</a>
    }*@
}
else
{
    <h1>Details</h1>
    <p>An error occured trying to populate course information. <a asp-action="CourseList" asp-controller="Course">Click here to return to the course list.</a></p>
}